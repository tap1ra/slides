- タイトル: mrubyで作る海外IPフィルタ
- 自己紹介
  + 所属
  + 名前
  + こういったものが好きです
- GMOペパボについて
  + サービス一覧
  + ロリポップ！・ホスティングとは？の説明を口頭で
- 海外IPフィルター
  + なぜ海外IPフィルタが必要なのか？
    * ロリポップ！では大規模ホスティングを提供
    * ある日のアラート ~ 大半が海外からのアクセス
    * 乗っ取りの危険や高負荷の原因となるため、予め防ぎたい！！
  + Nginxのgeoipモジュール
    * 国コードを指定してリクエストを拒否するコードサンプル
    * geoipモジュールにおける課題
      + 検索エンジンのクローラを許可したい
      + 特定のリクエストパスだけ動かしたい
      + vhostごとに有効・無効を切り替えたい
      + 11億リクエスト/日を捌く性能は保ちたい
      + 1リクエストにかかる時間も延ばしたくない
  + mruby-ipfilter
    * mrubyとは
      + 省メモリで組み込み向けのRuby実装
      + cRubyのgemと同様にmgemが存在する
      + gemと異なりコンパイル時にmgemを静的に組み込む
    * なぜmrubyなのか
      + ngx_mrubyによってnginxの処理をmrubyで制御可能
      + 本来C言語が必要なものをRuby構文で記述できるため、メンテナが確保しやすい
      + 作者が自社内にいる
    * mruby-ipfilterの処理概要
      - 海外IP判定をmaxminddbで国コードによっておこなう
      - UAでクローラーを考慮する
      - パス限定で、必要な時だけ適切にブロック
    * データアクセス最適化のためのmruby-msd
      - 一枚ペラで概要説明
    * バックエンドの仕組み
  + ngx_mrubyへ組み込み
    * コードサンプル
    * 通常アクセス時の例
    * 海外攻撃と推測されるアクセス例
- まとめ
- 求人
