- タイトル: mrubyで作る海外IPフィルター
- 自己紹介
  + 所属
  + 名前
  + 好きなもの
- GMOペパボについて
  + サービス一覧
  + ロリポップ！・ホスティングとは？の説明を口頭で
  + ロリポップ！の規模
    * 利用実績165万人
    * サイト数200万以上
    * アクセス総数 約11億/日
    * 1サーバ数万ユーザ収容の高集積
- 海外IPフィルター
  + 海外IPフィルタが必要な理由
    * ロリポップ！では大規模ホスティングを提供
    * ある日のアラート ~ 大半が海外からのアクセス
    * サイト乗っ取りの危険・高負荷の原因
  + Nginxのgeoipモジュール
    * 国コードを指定してリクエストを拒否するコードサンプル
    * geoipモジュールにおける課題
      + 検索エンジンのクローラを許可
      + 特定のリクエストパスで動作
      + vhostごとに有効・無効の切り替え
  + mruby-ipfilter
    * mrubyとは
      + 省メモリで組み込み向けのRuby実装
      + cRubyのgemと同様にmgemが存在する
      + gemと異なりコンパイル時にmgemを静的に組み込む
    * なぜmrubyなのか
      + ngx_mruby
    * mruby-ipfilterの処理概要
      - IPの国コードをMaxMind DBから取得
      - UserAgent(UA)を元にクローラーか判定
      - アクセスパスを限定してブロック
    * データアクセス最適化のためのmruby-msd
      - 一枚ペラで概要説明
  + ngx_mrubyへ組み込み
    * コードサンプル
    * 通常アクセス時の例
    * 海外攻撃と推測されるアクセス例
- まとめ
  + Nginx拡張時の選択肢にmruby
  + Ruby構文による敷居の低さ
- 求人
