- タイトル: mrubyで作る海外IPフィルター
- 自己紹介
  + 所属
  + 名前
  + 好きなもの
- GMOペパボについて
  + サービス一覧
  + ロリポップ！・ホスティングとは？の説明を口頭で
- 海外IPフィルター
  + 海外IPフィルタが必要な理由
    * ある日のアラート ~ 大半が海外からのアクセス
    * 高負荷・乗っ取りの危険があり、海外からのアクセスを制限する必要
  + 海外IPフィルタで考慮すべき課題
    + ロリポップ！は大規模・高集積
    + 課題
    + 課題:検索エンジンのクローラを許可
    + 課題:特定のリクエストパスで動作
    + 課題:ドメインごとに有効・無効の切り替え
    + 課題:パフォーマンスへの影響
  + 実装
    + ロリポの構成
    + geoipモジュールでは実装が困難
    + mrubyを使用
    * mrubyとは
      + 省メモリで組み込み向けのRuby実装
      + cRubyのgemと同様にmgemが存在する
      + gemと異なりコンパイル時にmgemを静的に組み込む
    * ~なぜmrubyなのか~
      + ~ngx_mruby~
      + ~ngx_mrubyの利点を説明した上で、geoipモジュールではやりずらかった話をする~
    * mruby-ipfilter + mruby-msdを開発
    * mruby-ipfilterの処理概要
      - IPの国コードをMaxMind DBから取得
      - UserAgent(UA)を元にクローラーか判定
      - アクセスパスを限定してブロック
    * データアクセス最適化のためのmruby-msd
      - 一枚ペラで概要説明
  + ngx_mrubyへ組み込み
    * コードサンプル
    * 通常アクセス時の例
    * 海外攻撃と推測されるアクセス例
- まとめ
  mrubyを使用することによりNginxをRuby構文で拡張することができることの良さを話す
- ロリポップ！は低価格・快適な環境目指して改善していきます。ぜひ利用してくださいを話す
- 求人
